---
layout: post
title: 운영체제 / CPU
date: 2020-03-05 12:47:10
categories: 컴퓨터
tags: 운영체제 CPU
comments_gitment: true
---

* TOC
{:toc}

---

## 운영체제 비트
비트란 쉽게말해 CPU가 메모리에서 자료를 읽어들여 데이터를 어떤 비트로 전송하는 버스를 말한다.  
비트 수가 높을수록 처리속도가 빨라지며, 64비트보다 낮게 지원하는 프로그램의 경우 해당 비트에서 처리되도록
분산처리 방식을 지원하고 있다.

---

## 운영체제의 프로세스 / 스레드
두 개의 프로세스는 완전히 독립된 두 개의 프로그램 실행을 위해서 사용되기 때문에 _<u>컨텍스트 스위칭</u>_
으로 인한 성능 저하가 발생한다.  
스레드는 하나의 프로그램 내에서 여러 개의 실행 흐름을 두기 위한 모델이며, 
프로세스처럼 완벽히 독립적인 구조가 아니다.  
스레드들 사이에는 공유하는 요소가 있으며, 스레드는 공유하는 요소로 인해 컨텍스트 스위칭에
걸리는 시간이 프로세스보다 짧다.  

※ 프로세스와 스레드의 차이점  
프로세스는 완벽히 독립적이기 때문에 메모리 영역 (코드, 데이터, 힙, 스택)을 다른 프로세스와 공유하지 않는다.  
스레드는 해당 스레드를 위한 스택을 생성할 뿐 그 이외의 영역 (코드, 데이터, 힙)을 공유한다.

(1) 스택을 독립적으로 할당하는 이유  
스택은 함수 호출 시 전달되는 인자, 되돌아갈 주소값 및 함수 내에서 선언하는 변수 등을 저장하기 위해 사용되는
메모리 공간이다.  
스택 메모리 공간이 독립적이라는 것은 독립적인 함수 호출과 실행 흐름이 가능한 것이다.  
실행 흐름의 최소 조건이 독립된 스택을 제공하는 것이다.

(2) 코드 영역을 공유  
프로세스는 독립적인 구조이기 때문에 다른 프로세스의 코드 영역에 있는 함수를 호출 할 수 없다.  
스레드는 코드 영역을 공유하기 때문에 두 개 이상의 스레드가 자신이 포함된 프로세스의 코드 영역에 있는
함수를 호출 할 수 있다.

(3) 데이터 영역과 힙 영역을 공유  
전역 변수와 동적 할당된 메모리 공간을 공유 할 수 있고, 이를 통해 스레드간의 통신을 할 수 있지만
동시에 메모리 접근이 이루어지기 때문에 주의가 필요하다.

---

## 캐시 메모리
CPU에서 한 번 이상 읽어들인 메인 메모리의 데이터를 저장하고 있다가 CPU가 다시 그 메모리에 저장된 데이터를
요구 할 때 메인 메모리를 통하지 않고 바로 값을 전달하는 용도로 사용된다.  
프로세스 사이에서 공유하는 메모리가 하나도 없기 때문에 _<u>컨텍스트 스위칭</u>_ 이 발생하면 캐시에 있는 모든
데이터를 모두 리셋하고 다시 캐시 정보를 불러와야 한다.  
스레드는 캐시 정보를 비울 필요가 없기 때문에 프로세스와 스레드의 컨텍스트 스위칭 속도의 차이는 이때 발생한다.

※ 스레드가 프로세스보다 컨텍스트 스위칭이 빠른이유  
메모리 영역을 공유하며, 실제로 공유되는 데이터가 있고 아닌 데이터가 있다.  
(SP - Stack Pointer, FP - Frame Pointer, PC - Program Counter 레지스터)

* PC는 실행해야 할 명령어의 위치를 가리키는 레지스터이다.
* 스레드별로 main 함수를 독립적으로 가지고 있고, 함수 호출도 독립적으로 진행되기 때문에 스레드별로
현재 PC 값은 달라야 하므로 공유되지 않는다.
* 스레드는 독립적인 스택을 가지기 때문에 스택의 정보를 담고 있는 SP와 FP는 공유되지 않는다.
 
---

```xml
⊙ 컨텍스트 스위칭 : 프로세스의 상태 정보를 저장하고 복원하는 일련의 과정.
```